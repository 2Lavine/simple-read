
前端埋点名称解释
----

UV（Unique visitor）

是指通过互联网访问、浏览这个网页的自然人。访问您网站的一台电脑客户端为一个访客。一天内同个访客多次访问仅计算一个`UV`。

IP（Internet Protocol）

独立`IP`是指访问过某站点的`IP`总数，以用户的 IP 地址作为统计依据。`00:00-24:00`内相同`IP`地址之被计算一次。

UV 与 IP 区别

> 如：你和你的家人用各自的账号在同一台电脑上登录新浪微博，则`IP`数 + 1，`UV`数 + 2。由于使用的是同一台电脑，所以`IP`不变，但使用的不同账号，所以`UV`+2

PV（Page View）

即页面浏览量或点击量，用户每 1 次对网站中的每个网页访问均被记录 1 个`PV`。用户对同一页面的多次访问，访问量累计，用以衡量网站用户访问的网页数量。

VV（Visit View）

用以统计所有访客 1 天内访问网站的次数。当访客完成所有浏览并最终关掉该网站的所有页面时便完成了一次访问，同一访客 1 天内可能有多次访问行为，访问次数累计。

PV 与 VV 区别

> 如：你今天 10 点钟打开了百度，访问了它的三个页面；11 点钟又打开了百度，访问了它的两个页面，则 PV 数 + 5，VV 数 + 2.PV 是指页面的浏览次数，VV 是指你访问网站的次数。

埋点分类
----

### 代码埋点

*   优点：

> *   控制精准，可以非常精确地选择什么时候发送数据。
> *   传递多样化自定义属性、自定义事件，传递比较丰富的数据到服务端。

*   缺点：

> *   埋点代价比较大，每一个控件的埋点都需要添加相应的代码，不仅工作量大，必须是技术人员才能完成。
> *   更新的代价比较大，每一次更新埋点方案，都必须改代码。

### 可视化埋点

个人理解的可视化埋点应该是肯定需要第三方的服务商支持🍜，不会有做专门业务的公司去做可视化埋点的解决方案。可视化埋点开发人员除集成采集可视化`SDK` 外👜，不需要额外去写埋点代码🍠，而是由业务人员或运营人员通过访问分析平台的圈选功能🤔，来 “圈” 出需要对用户行为进行捕捉的控件🎪，并给出事件命名🚘。圈选完毕后，这些配置会同步到各个用户的终端上😮，由采集`SDK`按照圈选的配置自动进行用户行为数据的采集和发送🚇。

优点：

> *   埋点代价小，更新代价小
> *   埋点只需业务同学接入，开发只需对接可视化`SDK`

缺点：

> *   无法做到自定义获取数据
> *   可视化埋点覆盖的功能有限
> *   仅支持客户端行为

### 无痕埋点

无痕埋点又叫全埋点🥪，网上又很多文章写的都是无痕埋点是将所有事件的操作全部上报😀，但是我们在实现的过程中肯定是不会监听那么多的事件吧😋，但是好像也有第三方服务商 sdk 集成了所有事件😏。

> **我的个人理解**无痕埋点是针对某一个单一事件，在全局实现监听达到上报，而不是全部事件上报才叫无痕埋点🥙。只要有某个事件在全局实现监听，针对这个事件的埋点方式就称为无痕埋点🌯

优点：

> *   由于采集的是全量数据，所以产品迭代过程中是不需要关注埋点逻辑的，也不会出现漏埋、误埋等现象。
> *   无埋点方式因为收集的是全量数据，可以大大减少运营和产品的试错成本
> *   如果集成 sdk 之后无需埋点，方便快捷

缺点：

> *   缺点与可视化埋点相同，未解决个性化自定义获取数据的问题，缺乏数据获取的灵活性；
> *   数据量过大，如果不使用第三方服务商，针对自身的服务器是个考验

实现方案步骤（uni-app，其他项目逻辑相同）
------------------------

#### 两方面上报: 1. 事件上报 (目前只有点击事件埋点)，2. 停留时间上报

*   **事件上报**：通过给元素绑定自定义指令的方式实现 (减少对原有代码的侵入)🍜，将信息存储在缓存池中定时上报，上报之后清空之前的上报信息🥠。
*   **停留时间上报**：需要重新封装路由，创建路由拦截在跳转之前记录来源, 以及上一个页面的停留时间，当拦截器捕获成功之后🌯，如果发现停留时间大于 xx 秒进行上报🥙。

_优点_：清晰合理，比较适合新项目。

_缺点_：针对老项目需要与产品和运营对接埋点方案绑定自定义事件🤪，如果是老项目需要对`uni.navigateTo`,`uni.redirectTo`,`uni.reLaunch`,`uni.switchTab` 进行二次封装。

> 问：为什么何将信息存储，而不是实时上报？  
> 答：考虑到服务器的压力，采用了定时上报的方式。  
> 问：为什么监听停留时长大于 XX 秒才进行上报？  
> 答：1. 服务器的压力问题。2 考虑到用户可能做一些没意义的操作，所以停留时长大于 XX 秒才属于有效页面。

