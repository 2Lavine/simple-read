> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [juejin.cn](https://juejin.cn/post/7046195769681903630)

## **WHAT-HOW-WHY**结合流程学习

当面对一个新的知识点，如果上来直接讲原理，大概多数人都会懵逼
*   What - 东西是什么，关键概念
*   How - 使用的流程？
*   Why - 原理和为什么这样实现。


### REST 架构风格

REST 全称：**Representtational State Transfer**，翻译成中文就是表述性状态转移。

首先从表述和状态转移这两个关键词去理解 REST
*   表述 RESTful 架构是基于资源的架构，资源的含义是广泛：任何可以命名的信息都可以是资源。比如文档、图像、时间服务等，资源是到一组实体的概念映射。


---
可以看到无论是 tickets 还是 orders 都是用**复数**的形式去标识资源，这是合适的。尽管语文老师可能反对用复数表示单个资源，但为了保持简单并且保持 URI 格式一致，统一使用复数好处多多，也不必再为了选择 person 还是 people 而烦恼。


#### REST 的约束条件

REST 的约束条件有：

*   客户端 - 服务器
*   无状态
*   缓存
*   统一接口
*   分层系统
*   按需代码（可选）


---
（2）无状态  
通信本质上必须是无状态的，也就是说指两次请求之间不存在依赖关系，这样从客户端到服务器必须包含请求的所需的所有信息，并且不能在服务器上存储任何上下文。
这种约束导致了可见性、可靠性和可伸缩性得到了改善。

缺点就是在一系列请求中发送重复的请求头信息。
_HTTP 用 cookie 机制解决了识别用户，持久会话的场景_


---

（3）缓存  
缓存约束条件主要是用于改善网络的效率。缓存约束条件要求一个请求的响应中的数据被隐式地或显式地标记为可缓存的或不可缓存的。如果响应是可缓存的，那么客户端缓存就可以为以后的相同请求重用这个响应的数据，减少了网络交互，提高了效率、可伸缩性和用户感知的性能。

_HTTP 缓存分为共享缓存与私有缓存_


---
可能大家一开始看 HTTP 报文格式的时候，不会注意**每一行都有明确的分段：crlf** 
![[../_resources/66bf38626fdcab7b295ea23babefbcde_MD5.webp]]
这是为了适应 TCP 而设计的。
TCP 是基于字节流，当大报文传进 TCP 时，根据握手双方而制定的报文段大小（称为 MSS），会将报文分为很多段。
TCP 只负责传输报文段，而不会做边界处理，这就需要 HTTP 来划分边界。
除实体之外的 HTTP 报文要以 crlf 分段处理。

报文的实体主体（包体）一样需要边界处理。

---
HTTP 包体传输有两种方式：

*   定长包体，使用 Content-Length 表示。当 Content-Length 小于实际包体字节数，浏览器就会抛弃后续的字节。如果大于，则会报错。
*   不定长包体，使用 Transfer-Encoding 指明使用 chunk 传输。将包体分为一个个 chunk 传输，最后一个 chunk 使用 last-chunk 表明，最后携带包体总长度。
