%%begin highlights%%
Solidity中的函数​
方括号中的是可写可不写的关键字
`function <function name> (<parameter types>) {internal|external|public|private} [pure|view|payable] [returns (<return types>)]`

从前往后一个一个看：
-  function：声明函数时的固定用法，想写函数，就要以function关键字开头。
- function name：函数名。
- (parameter types)：圆括号里写函数的参数，也就是要输入到函数的变量类型和名字。
- {internal|external|public|private}：函数可见性说明符，一共4种。
	- 没标明函数类型的，默认internal。
	- public: 内部外部均可见。(也可用于修饰状态变量，public变量会自动生成 getter函数，用于查询数值).
	- private: 只能从本合约内部访问，继承的合约也不能用（也可用于修饰状态变量）。
	- external: 只能从合约外部访问（但是可以用this.f()来调用，f是函数名）
	- internal: 只能从合约内部访问，继承的合约可以用（也可用于修饰状态变量）。
- [pure|view|payable]：决定函数权限/功能的关键字。
	- payable（可支付的）很好理解，带着它的函数，运行的时候可以给合约转入ETH。pure和view的介绍见下一节。
- [returns ()]：函数返回的变量类型和名称。

## 什么是Pure和View

solidity加入这两个关键字，我认为是因为gas fee
包含pure跟view关键字的函数是不改写链上状态的，因此用户直接调用他们是不需要付gas的
在以太坊中，以下语句被视为修改链上状态：
- 写入状态变量。
- 释放事件。
- 创建其他合约。
- 使用selfdestruct.
- 通过调用发送以太币。
- 调用任何未标记view或pure的函数。
- 使用低级调用（low-level calls）。
- 使用包含某些操作码的内联汇编。

包含pure关键字的函数，不能读取也不能写入存储在链上的状态变量。就像小怪一样，看不到也摸不到碧池公主。
view，“看”，在solidity里理解为“看客”。包含view关键字的函数，能读取但也不能写入状态变量。类似马里奥，能看到碧池，但终究是看客，不能入洞房。
不写pure也不写view，函数既可以读取也可以写入状态变量。类似马里奥里的boss，可以对碧池公主为所欲为🐶。

## pure v.s. view

// 默认
function add() external{
number = number + 1;
}

那pure函数能做些什么？举个例子，你可以给函数传递一个参数 _number，然后让他返回 _number+1。

// pure: 纯纯牛马
function addPure(uint256 _number) external pure returns(uint256 new_number){
new_number = _number+1;
}

如果add()包含view，比如function add() view external，也会报错。因为view能读取，但不能够改写状态变量。可以稍微改写下方程，让他不改写number，而是返回一个新的变量。
```js
// view: 看客
function addView() external view returns(uint256 new_number) {
	new_number = number + 1;
}
```

## internal v.s. external
```js
// internal: 内部
function minus() internal {
number = number - 1;
}
// 合约内的函数可以调用内部函数
function minusCall() external {
minus();
}
```

我们定义一个internal的minus()函数，每次调用使得number变量减1。
由于是internal，只能由合约内部调用，而外部不能。因此，我们必须再定义一个external的minusCall()函数，来间接调用内部的minus()

%%end highlights%%

!!!PAGE NOTE!!!
%%begin pagenote%%

%%end pagenote%%

 #五彩插件 [原文](https://www.wtf.academy/solidity-start/Function/)
更新时间: 2023-07-22 19:47